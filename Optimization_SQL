-- Optimization
-- ------------
-- This will return results for all Terms; use where clause to get current Term
create view MaxNumClasses as (
   select 
      t.Budget
      , (select distinct t.Budget/Salary 
         from Professor
         ) as NumClassesAllowedByBudget
      , (select COUNT(ClassRoomID)
         from ClassRoom
         where Available=1
         ) as NumOpenClassRooms
      , (select SUM(NumClassesCanTeach)
         from Professor
         ) as NumClassesProfessorsCanTeach
   from Term t
   group by t.Budget
   -- where Term.Budget=MAX(Term.Budget)
);

-- End of file
